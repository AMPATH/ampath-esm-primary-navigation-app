"use strict";(globalThis.webpackChunk_openmrs_esm_login_app=globalThis.webpackChunk_openmrs_esm_login_app||[]).push([["6778"],{67217:function(n,e,a){a.d(e,{Z:()=>i});var r=a(79233),s=a.n(r),o=a(10361),t=a.n(o)()(s());t.push([n.id,".-esm-login__change-password-modal__submitButton___M2e6N .cds--inline-loading{min-height:1rem}.-esm-login__change-password-modal__submitButton___M2e6N .cds--inline-loading__text{font-size:unset}","",{version:3,sources:["webpack://./src/change-password/change-password-modal.scss","webpack://./../../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAGE,8EACE,eC2BS,CDxBX,oFACE,eAAA",sourcesContent:["@use '@carbon/layout';\n\n.submitButton {\n  :global(.cds--inline-loading) {\n    min-height: layout.$spacing-05;\n  }\n\n  :global(.cds--inline-loading__text) {\n    font-size: unset;\n  }\n}\n","// Code generated by @carbon/layout. DO NOT EDIT.\n//\n// Copyright IBM Corp. 2018, 2023\n//\n// This source code is licensed under the Apache-2.0 license found in the\n// LICENSE file in the root directory of this source tree.\n//\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-01: 0.125rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-02: 0.25rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-03: 0.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-04: 0.75rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-05: 1rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-06: 1.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-07: 2rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-08: 2.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-09: 3rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-10: 4rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-11: 5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-12: 6rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-13: 10rem !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/layout\n$spacing: (\n  spacing-01: $spacing-01,\n  spacing-02: $spacing-02,\n  spacing-03: $spacing-03,\n  spacing-04: $spacing-04,\n  spacing-05: $spacing-05,\n  spacing-06: $spacing-06,\n  spacing-07: $spacing-07,\n  spacing-08: $spacing-08,\n  spacing-09: $spacing-09,\n  spacing-10: $spacing-10,\n  spacing-11: $spacing-11,\n  spacing-12: $spacing-12,\n  spacing-13: $spacing-13,\n);\n"],sourceRoot:""}]),t.locals={submitButton:"-esm-login__change-password-modal__submitButton___M2e6N"};let i=t},62178:function(n,e,a){a.r(e),a.d(e,{default:()=>q});var r=a(4449),s=a.n(r),o=a(55938),t=a(84406),i=a(31677),l=a(78459),c=a(28216),u=a(60288),d=a(79222),p=a(90487),g=a.n(p),m=a(80631),b=a.n(m),w=a(52052),f=a.n(w),y=a(64010),h=a.n(y),C=a(11469),v=a.n(C),_=a(9329),P=a.n(_),$=a(67217),E={};E.styleTagTransform=P(),E.setAttributes=h(),E.insert=f().bind(null,"head"),E.domAPI=b(),E.insertStyleElement=v(),g()($.Z,E);let N=$.Z&&$.Z.locals?$.Z.locals:void 0;function A(n,e){(null==e||e>n.length)&&(e=n.length);for(var a=0,r=Array(e);a<e;a++)r[a]=n[a];return r}function S(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var a,r,s=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=s){var o=[],t=!0,i=!1;try{for(s=s.call(n);!(t=(a=s.next()).done)&&(o.push(a.value),!e||o.length!==e);t=!0);}catch(n){i=!0,r=n}finally{try{t||null==s.return||s.return()}finally{if(i)throw r}}return o}}(n,e)||function(n,e){if(n){if("string"==typeof n)return A(n,e);var a=Object.prototype.toString.call(n).slice(8,-1);if("Object"===a&&n.constructor&&(a=n.constructor.name),"Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return A(n,e)}}(n,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let q=function(n){var e=n.close,a=(0,o.useTranslation)().t,p=S((0,r.useState)(!1),2),g=p[0],m=p[1],b=S((0,r.useState)(null),2),w=b[0],f=b[1],y=t.z.string({required_error:a("oldPasswordRequired","Old password is required")}).trim().min(1,a("oldPasswordRequired","Old password is required")),h=t.z.string({required_error:a("newPasswordRequired","New password is required")}).trim().min(1,a("newPasswordRequired","New password is required")),C=t.z.string({required_error:a("passwordConfirmationRequired","Password confirmation is required")}).trim().min(1,a("passwordConfirmationRequired","Password confirmation is required")),v=t.z.object({oldPassword:y,newPassword:h,passwordConfirmation:C}).refine(function(n){return n.newPassword===n.passwordConfirmation},{message:a("passwordsDoNotMatch","Passwords do not match"),path:["passwordConfirmation"]}),_=(0,l.cI)({resolver:(0,i.F)(v),defaultValues:{oldPassword:"",newPassword:"",passwordConfirmation:""}}),P=_.handleSubmit,$=_.control,E=_.formState.errors,A=(0,r.useCallback)(function(n){m(!0);var r=n.oldPassword,s=n.newPassword;(0,d.o)(r,s).then(function(){e(),(0,u.showSnackbar)({title:a("passwordChangedSuccessfully","Password changed successfully"),kind:"success"})}).catch(function(n){var e,a;f(null!=(a=null==n||null==(e=n.responseBody)?void 0:e.message)?a:null==n?void 0:n.message)}).finally(function(){m(!1)})},[e,a]);return s().createElement(c.Form,{onSubmit:P(A,function(){return m(!1)})},s().createElement(c.ModalHeader,{closeModal:e,title:a("changePassword","Change password")}),s().createElement(c.ModalBody,null,s().createElement(c.Stack,{gap:5,className:N.languageOptionsContainer},s().createElement(l.Qr,{name:"oldPassword",control:$,render:function(n){var e,r=n.field,o=r.onChange,t=r.value;return s().createElement(c.PasswordInput,{id:"oldPassword",invalid:!!(null==E?void 0:E.oldPassword),invalidText:null==E||null==(e=E.oldPassword)?void 0:e.message,labelText:a("oldPassword","Old password"),onChange:o,value:t})}}),s().createElement(l.Qr,{name:"newPassword",control:$,render:function(n){var e,r=n.field,o=r.onChange,t=r.value;return s().createElement(c.PasswordInput,{id:"newPassword",invalid:!!(null==E?void 0:E.newPassword),invalidText:null==E||null==(e=E.newPassword)?void 0:e.message,labelText:a("newPassword","New password"),onChange:o,value:t})}}),s().createElement(l.Qr,{name:"passwordConfirmation",control:$,render:function(n){var e,r=n.field,o=r.onChange,t=r.value;return s().createElement(c.PasswordInput,{id:"passwordConfirmation",invalid:!!(null==E?void 0:E.passwordConfirmation),invalidText:null==E||null==(e=E.passwordConfirmation)?void 0:e.message,labelText:a("confirmPassword","Confirm new password"),onChange:o,value:t})}}),w&&s().createElement(c.InlineNotification,{kind:"error",onClick:function(){return f("")},subtitle:w,title:a("errorChangingPassword","Error changing password")}))),s().createElement(c.ModalFooter,null,s().createElement(c.Button,{kind:"secondary",onClick:e},a("cancel","Cancel")),s().createElement(c.Button,{className:N.submitButton,disabled:g,type:"submit"},g?s().createElement(c.InlineLoading,{description:a("changingPassword","Changing password")+"..."}):s().createElement("span",null,a("change","Change")))))}}}]);