/** @module @category API */ import { openmrsObservableFetch, restBaseUrl } from "@openmrs/esm-api";
import { map, take } from "rxjs/operators/index.js";
export function toLocationObject(openmrsRestForm) {
    return {
        uuid: openmrsRestForm.uuid,
        display: openmrsRestForm.display
    };
}
export function getLocations(tagUuidOrName = null, query = null) {
    const params = new URLSearchParams();
    if (tagUuidOrName) {
        params.set('tag', tagUuidOrName);
    }
    if (query) {
        params.set('q', query);
    }
    const queryString = params.toString();
    const url = `${restBaseUrl}/location${queryString ? '?' + queryString : ''}`;
    return openmrsObservableFetch(url).pipe(map((results)=>{
        const locations = results.data.results.map(toLocationObject);
        return locations;
    })).pipe(take(1));
}
